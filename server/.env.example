# faolán - writing the env file code 29.11.25. adding comments to explain what each section does.

# this is what we will eventually move into the env. for now, no credentials here please!

# == Database Configuration ==

#add railway credentials into the env file, not this one.

DATABASE_URL=postgresql://username:password@hostname:port/database_name
# function: connection tells the Node.js app how to connect to the postgreSQL database. 
# how: application uses thie string from railway to create database connections
# the code is using it like: <const db= newPool({connectionString:process.env.DATABASE_url })> to access database.

PGSSLMODE=require
# function: forces encrypted connections to Railway's database, which Railway requires.
# why: without this Railway rejects connections for security
# why: prevents 'connection refused' errors. 
# how: <require> = 'always use SSL encryption'

# == Application Settings ==

NODE_ENV=production
# function: tells the application it's running in production vs development
# how: the code checks <If (process.env.NODE_ENV === 'production')>
# why: enables production optimisation
# why: disables debug features
# why: ^ VERY important because it means users will see user-friendly error pages. it also hides sensitive info, improves performance, and secures error handling. without it users might see your db password or file structure.

PORT=3001 
# function: tells the Express server which port to listen to
# how: <app.listen(process,env.PORT  ||  3001)
# why: the code needs a port to function - this tells app to use this port for local development, so works both locally and on Railway
# but! Railway will override this port automatically (good thing)

# == JWT/Security ==

const token = jwt.sign(userData, process.env.JWT_SECRET)
const decoded = jwt.verify(token, process.env.JWT_SECRET)
# function: secret key for creating and assigning authentication tokens
# why: if someone knows the key they can forge fake user sessions

# -- BCRYPT_ROUNDS

const hash = await bcrypt.hash(password, process.env.BCRYPT_ROUNDS) // 12 times 
# function: gives number of times to re-hash passwords for security
# how: round 1) takes pw <"userPassword123">, runs through bcrypt algorithm <password + salt → bcryptRound1 → bcryptRound2 → ... → bcryptRound12 → finalHash>
# round 1) creates the first hash <some_random_string_1>
# round 2) takes hash from round 1, runs through algorithm again, creates second hash
# continues for 12 rounds) until creates finalHash
# why: hacker trying to crack passwords will need to wait for all 12 rounds, 12 rounds = 10 times harder to crack.
# can increase number, but that also slows system down.

# === CORS (cross origin resource sharing) ===

app.use(cors({ origin: process.env.CORS_ORIGIN }))
#function: tells Express which websites can call your API
#how: <cors()> is a middleware that checks the <origin> header of incoming requests. 
#how: then <origin: process.env.CORS_origin> restricts access to the domain(s) you specify in your env file, blocking requests from other browsers
#why: browsers implement a security feature called the same-origin polcy
#why: cors allows you to relax this restriction, so the frontend - runnning on different domain or port - can communicate with backend.
#why: it also prevents other websites from calling your API. 
